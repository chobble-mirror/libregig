.md:flex.justify-between
  %p
    = filter_link('Upcoming', events_path(band_id: params[:band_id]), 'mr-4', params[:period].nil?)
    = filter_link('Past', events_path(period: 'past', band_id: params[:band_id], sort: 'date desc'), 'mr-4', params[:period] == 'past')
    = filter_link('All', events_path(period: 'all', band_id: params[:band_id]), 'mr-4', params[:period] == 'all')

- if @events.any?
  .relative.overflow-x-auto
    %table
      %colgroup
        %col.w-auto.lg:w-80
        %col{style: "width: 1%;"}
        %col{style: "width: 1%;"}
        %col{style: "width: 1%"}
        %col{style: "width: 1%;"}
        %col{style: "width: 1%;"}
      %thead
        %tr
          %th= table_header_sort('events', 'name', 'name', 'date')
          %th= table_header_sort('events', 'date', 'date', 'date')
          %th= table_header_sort('events', 'date', 'time', 'date')
          %th.hidden.md:table-cell= table_header_sort('events', 'created', 'created')
          %th.hidden.md:table-cell= table_header_sort('events', 'last_modified', 'modified')
      %tbody
        - @events.each do |event|
          %tr
            %td
              = link_to (event.name != "" ? event.name : "NOT SET"), event_path(event), class: 'break-all', title: event.description
            %td.whitespace-nowrap{title: "#{event.date.strftime('%a %d %b %Y')}"}
              = event.date&.strftime('%a %d %b %Y') || "NOT SET"
            %td.whitespace-nowrap{title: "#{event.date.strftime('%H:%M')}"}
              = event.date&.strftime('%H:%M') || "NOT SET"
            %td.hidden.md:table-cell.whitespace-nowrap{title: "#{event.created_at}"}
              = time_ago_in_words(event.created_at)
            %td.hidden.md:table-cell.whitespace-nowrap{title: "#{event.updated_at}"}
              = time_ago_in_words(event.updated_at)
- else
  - if params[:band_id].present?
    %p No events found matching that filter
  - elsif Current.user.organiser?
    %p No events found - add one with the button above.
  - elsif Current.user.member?
    %p No events found - an organiser needs to invite you to one.
  - elsif Current.user.admin?
    %p No events found - an organiser needs to create one.
